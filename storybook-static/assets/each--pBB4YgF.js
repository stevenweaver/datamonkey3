import{E as K,f as S,g as b,h as W,i as Y}from"./template-CIKGjA4E.js";import{h as Z}from"./class-BhzPnwhT.js";import{C as $,i as j,g as V,I as M,D as P,j as U,k as ee,F as X,q as re,G as B,H as F,J as ae,K as ne,L as ie,A as fe,d as le,y as ue,M as te,N as ve,O as G,P as se}from"./runtime-CsLX-Eqq.js";function me(i,e){return e}function de(i,e,a,u){for(var v=[],s=e.length,o=0;o<s;o++)ae(e[o].e,v,!0);var h=s>0&&v.length===0&&a!==null;if(h){var c=a.parentNode;ne(c),c.append(a),u.clear(),I(i,e[0].prev,e[s-1].next)}ie(v,()=>{for(var p=0;p<s;p++){var d=e[p];h||(u.delete(d.k),I(i,d.prev,d.next)),fe(d.e,!h)}})}function Ae(i,e,a,u,v,s=null){var o=i,h={flags:e,items:new Map,first:null},c=(e&K)!==0;if(c){var p=i;o=p.appendChild($())}var d=null,E=!1,x=le(()=>{var r=a();return ue(r)?r:r==null?[]:X(r)});j(()=>{var r=V(x),f=r.length;if(!(E&&f===0)){E=f===0;{var t=te;oe(r,h,o,v,e,(t.f&M)!==0,u,a)}s!==null&&(f===0?d?P(d):d=U(()=>s(o)):d!==null&&ee(d,()=>{d=null})),V(x)}})}function oe(i,e,a,u,v,s,o,h){var L,R,q,O;var c=(v&W)!==0,p=(v&(S|b))!==0,d=i.length,E=e.items,x=e.first,r=x,f,t=null,T,_=[],m=[],g,C,n,l;if(c)for(l=0;l<d;l+=1)g=i[l],C=o(g,l),n=E.get(C),n!==void 0&&((L=n.a)==null||L.measure(),(T??(T=new Set)).add(n));for(l=0;l<d;l+=1){if(g=i[l],C=o(g,l),n=E.get(C),n===void 0){var z=r?r.e.nodes_start:a;t=_e(z,e,t,t===null?e.first:t.next,g,C,l,u,v,h),E.set(C,t),_=[],m=[],r=t.next;continue}if(p&&ce(n,g,l,v),n.e.f&M&&(P(n.e),c&&((R=n.a)==null||R.unfix(),(T??(T=new Set)).delete(n))),n!==r){if(f!==void 0&&f.has(n)){if(_.length<m.length){var k=m[0],A;t=k.prev;var D=_[0],H=_[_.length-1];for(A=0;A<_.length;A+=1)J(_[A],k,a);for(A=0;A<m.length;A+=1)f.delete(m[A]);I(e,D.prev,H.next),I(e,t,D),I(e,H,k),r=k,t=H,l-=1,_=[],m=[]}else f.delete(n),J(n,r,a),I(e,n.prev,n.next),I(e,n,t===null?e.first:t.next),I(e,t,n),t=n;continue}for(_=[],m=[];r!==null&&r.k!==C;)(s||!(r.e.f&M))&&(f??(f=new Set)).add(r),m.push(r),r=r.next;if(r===null)continue;n=r}_.push(n),t=n,r=n.next}if(r!==null||f!==void 0){for(var w=f===void 0?[]:X(f);r!==null;)(s||!(r.e.f&M))&&w.push(r),r=r.next;var N=w.length;if(N>0){var Q=v&K&&d===0?a:null;if(c){for(l=0;l<N;l+=1)(q=w[l].a)==null||q.measure();for(l=0;l<N;l+=1)(O=w[l].a)==null||O.fix()}de(e,w,Q,E)}}c&&re(()=>{var y;if(T!==void 0)for(n of T)(y=n.a)==null||y.apply()}),B.first=e.first&&e.first.e,B.last=t&&t.e}function ce(i,e,a,u){u&S&&F(i.v,e),u&b?F(i.i,a):i.i=a}function _e(i,e,a,u,v,s,o,h,c,p){var d=(c&S)!==0,E=(c&Y)===0,x=d?E?ve(v):G(v):v,r=c&b?G(o):o,f={i:r,v:x,k:s,a:null,e:null,prev:a,next:u};try{return f.e=U(()=>h(i,x,r,p),Z),f.e.prev=a&&a.e,f.e.next=u&&u.e,a===null?e.first=f:(a.next=f,a.e.next=f.e),u!==null&&(u.prev=f,u.e.prev=f.e),f}finally{}}function J(i,e,a){for(var u=i.next?i.next.e.nodes_start:a,v=e?e.e.nodes_start:a,s=i.e.nodes_start;s!==u;){var o=se(s);v.before(s),s=o}}function I(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}export{Ae as e,me as i};
