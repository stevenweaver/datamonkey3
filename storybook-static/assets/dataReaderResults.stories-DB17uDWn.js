import{c as he,a as l,t as d}from"./template-CIKGjA4E.js";import{p as xe,l as me,a as Ce,f as F,b as Ie,g as r,m as j,e as s,t as v,d as Fe,h as Pe,s as G,c as t}from"./runtime-CsLX-Eqq.js";import{i as g,s as n}from"./if-BJwBTplU.js";import{e as ce,i as Ae}from"./store-CEga9lFI.js";import{p as we}from"./props-ucnq1n3h.js";import{P as ue}from"./phylotree-CJOXszaR.js";import{e as Te,i as ke}from"./each--pBB4YgF.js";import{h as He}from"./html-ynStkv79.js";import{s as De}from"./class-BhzPnwhT.js";import"./index-BJUjmB_L.js";import"./input-e_bUZ-Vg.js";import"./this-BvMMnuCv.js";import"./index-client-C32oe8zx.js";import"./GardVisualization-BErLMUnZ.js";import"./attributes-DOIZIB14.js";import"./select-BSQ0X8Fl.js";var Je=d('<button class="text-sm text-blue-600 hover:text-blue-800"> </button>'),We=d('<p class="mt-1 text-xs opacity-90"> </p>'),ze=d('<button class="mt-2 rounded bg-white bg-opacity-50 px-3 py-1 text-xs font-medium hover:bg-opacity-70"> </button>'),$e=d('<div><div class="flex items-start"><div class="mr-3 flex-shrink-0" style="margin-top: 2px;"><!></div> <div class="flex-1"><h4 class="font-semibold"> </h4> <p class="text-sm"> </p> <!> <!></div></div></div>'),Be=d('<div class="text-center"><p class="text-sm text-gray-500"> </p></div>'),Ue=d(`<div class="sequence-warnings mt-4 rounded-lg border border-gray-200 bg-white p-4 shadow-sm"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div> <div class="mt-3 space-y-3"><!> <!></div> <div class="mt-4 text-xs text-gray-500"><p>These warnings are meant to help you improve your analysis results. Minor issues may not
				significantly affect results.</p></div></div>`);function Oe(K,E){xe(E,!1);const a=j();let I=we(E,"fileMetricsJSON",8,null),o=j([]),_=j(!1);function P(e){G(o,[]),!(!e||!e.FILE_INFO)&&(e.FILE_INFO.duplicate_sequences&&e.FILE_INFO.duplicate_sequences>0&&r(o).push({type:"warning",title:"Duplicate Sequences Detected",message:`Found ${e.FILE_INFO.duplicate_sequences} duplicate sequence${e.FILE_INFO.duplicate_sequences===1?"":"s"} in your alignment.`,details:"Duplicate sequences can affect the accuracy of selection analysis. Consider removing duplicates for more reliable results.",action:"View duplicates",actionHandler:()=>Q()}),e.FILE_INFO.sites&&e.FILE_INFO.sites<30&&r(o).push({type:"info",title:"Short Alignment",message:`Your alignment has only ${e.FILE_INFO.sites} sites, which is relatively short.`,details:"Short alignments may have limited statistical power for detecting selection. Consider adding more sequences or sites if possible.",action:null}),e.FILE_INFO.sequences&&e.FILE_INFO.sequences<8&&r(o).push({type:"info",title:"Small Sample Size",message:`Your alignment has only ${e.FILE_INFO.sequences} sequences, which is a small sample.`,details:"Selection analyses generally perform better with larger samples. Consider adding more sequences if possible.",action:null}),e.FILE_INFO.ambiguous_sites&&e.FILE_INFO.ambiguous_sites>0&&r(o).push({type:"warning",title:"Ambiguous Characters",message:`Found ${e.FILE_INFO.ambiguous_sites} ambiguous character${e.FILE_INFO.ambiguous_sites===1?"":"s"} in your alignment.`,details:"Ambiguous characters (like N, X, etc.) may cause issues with some analyses. Consider resolving these ambiguities if possible.",action:null}),e.FILE_INFO.stop_codons&&e.FILE_INFO.stop_codons>0&&r(o).push({type:"error",title:"Stop Codons Detected",message:`Found ${e.FILE_INFO.stop_codons} stop codon${e.FILE_INFO.stop_codons===1?"":"s"} in your alignment.`,details:"Stop codons within the alignment may indicate frame shifts, sequencing errors, or pseudogenes. Verify your alignment and genetic code selection.",action:null}),e.FILE_INFO.rawsites&&e.FILE_INFO.rawsites%3!==0&&r(o).push({type:"error",title:"Alignment Length Not Divisible by 3",message:`Your alignment length (${e.FILE_INFO.rawsites}) is not divisible by 3.`,details:"Codon-based analyses require sequence lengths to be multiples of 3. Check for frameshifts or alignment errors.",action:null}))}function Q(){alert("This function would show the duplicate sequences. Implementation pending.")}function X(e){switch(e){case"error":return"bg-red-50 border-red-300 text-red-800";case"warning":return"bg-yellow-50 border-yellow-300 text-yellow-800";case"info":default:return"bg-blue-50 border-blue-300 text-blue-800"}}function Z(e){switch(e){case"error":return`
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        `;case"warning":return`
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        `;case"info":default:return`
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
          </svg>
        `}}function ee(){G(_,!r(_))}me(()=>Pe(I()),()=>{I()&&P(I())}),me(()=>(r(_),r(o)),()=>{G(a,r(_)?r(o):r(o).slice(0,2))}),Ce();var S=he(),A=F(S);{var y=e=>{var w=Ue(),O=t(w),T=t(O),h=t(T),f=s(T,2);{var L=c=>{var i=Je(),u=t(i);v(()=>n(u,r(_)?"Show Fewer":"Show All")),ce("click",i,ee),l(c,i)};g(f,c=>{r(o).length>2&&c(L)})}var te=s(O,2),k=t(te);Te(k,1,()=>r(a),ke,(c,i)=>{var u=$e(),M=t(u),D=t(M),J=t(D);He(J,()=>Z(r(i).type));var re=s(D,2),W=t(re),z=t(W),$=s(W,2),se=t($),R=s($,2);{var ae=p=>{var x=We(),N=t(x);v(()=>n(N,r(i).details)),l(p,x)};g(R,p=>{r(i).details&&p(ae)})}var oe=s(R,2);{var B=p=>{var x=ze(),N=t(x);v(()=>n(N,r(i).action)),ce("click",x,function(...ie){var U;(U=r(i).actionHandler)==null||U.apply(this,ie)}),l(p,x)};g(oe,p=>{r(i).action&&p(B)})}v(p=>{De(u,p),n(z,r(i).title),n(se,r(i).message)},[()=>`warning-item rounded-md border p-3 ${X(r(i).type)}`],Fe),l(c,u)});var q=s(k,2);{var H=c=>{var i=Be(),u=t(i),M=t(u);v(()=>n(M,`+${r(o).length-2} more ${(r(o).length-2===1?"warning":"warnings")??""}`)),l(c,i)};g(q,c=>{!r(_)&&r(o).length>2&&c(H)})}v(()=>n(h,`Sequence Warnings (${r(o).length??""})`)),l(e,w)};g(A,e=>{r(o).length>0&&e(y)})}l(K,S),Ie()}Oe.__docgen={version:3,name:"SequenceWarnings.svelte",data:[{name:"fileMetricsJSON",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"other",text:"null"},static:!1,readonly:!1,defaultValue:"null"}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};var Ye=d('<div class="mt-4 text-red-600"><p class="font-medium">Error:</p> <p> </p></div>'),Ve=d('<h4 class="mt-6 text-lg font-bold">Raw Neighbor Joining (NJ) String</h4> <div class="mt-2 overflow-x-auto rounded border border-gray-300 bg-gray-100 p-2"><pre class="whitespace-pre-wrap text-sm text-gray-700"> </pre></div> <!>',1),je=d('<h4 class="mt-6 text-lg font-bold">User Supplied Tree</h4> <div class="mt-2 overflow-x-auto rounded border border-gray-300 bg-gray-100 p-2"><pre class="whitespace-pre-wrap text-sm text-gray-700"> </pre></div> <!>',1),Ge=d('<table class="min-w-full border-collapse"><thead><tr><th class="border-b border-gray-200 px-2 py-2 text-left">Metric</th><th class="border-b border-gray-200 px-2 py-2 text-left">Value</th></tr></thead><tbody><tr><td class="border-b border-gray-200 px-2 py-2 font-medium">Genetic Code ID:</td><td class="border-b border-gray-200 px-2 py-2"> </td></tr><tr><td class="border-b border-gray-200 px-2 py-2 font-medium">Good Tree:</td><td class="border-b border-gray-200 px-2 py-2"> </td></tr><tr><td class="border-b border-gray-200 px-2 py-2 font-medium">Partitions:</td><td class="border-b border-gray-200 px-2 py-2"> </td></tr><tr><td class="border-b border-gray-200 px-2 py-2 font-medium">Raw Sites:</td><td class="border-b border-gray-200 px-2 py-2"> </td></tr><tr><td class="border-b border-gray-200 px-2 py-2 font-medium">Processed Sites:</td><td class="border-b border-gray-200 px-2 py-2"> </td></tr><tr><td class="border-b border-gray-200 px-2 py-2 font-medium">Sequences:</td><td class="border-b border-gray-200 px-2 py-2"> </td></tr><tr><td class="border-b border-gray-200 px-2 py-2 font-medium">Timestamp:</td><td class="border-b border-gray-200 px-2 py-2"> </td></tr></tbody></table> <!> <!>',1),Ke=d('<button class="mb-4 inline-flex items-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none"></button> <!>',1),Qe=d('<p class="mt-4 text-gray-600">No data available.</p>'),Xe=d('<!> <div class="metrics min-w-full rounded-lg border border-gray-300 bg-gray-50 p-4 shadow-md"><h3 class="mb-4 text-lg font-bold">Alignment File Metrics</h3> <!></div>',1);function Ne(K,E){var S,A;xe(E,!1);let a=we(E,"fileMetricsJSON",8),I=j(!1);const o=(A=(S=a())==null?void 0:S.FILE_INFO)==null?void 0:A.goodtree;Ae();var _=Xe(),P=F(_);Oe(P,{get fileMetricsJSON(){return a()}});var Q=s(P,2),X=s(t(Q),2);{var Z=y=>{var e=Ye(),w=s(t(e),2),O=t(w);v(()=>n(O,a().error)),l(y,e)},ee=y=>{var e=he(),w=F(e);{var O=h=>{var f=Ke(),L=F(f);L.textContent=o?"Passed":"Not Passed";var te=s(L,2);{var k=q=>{var H=Ge(),c=F(H),i=s(t(c)),u=t(i),M=s(t(u)),D=t(M),J=s(u),re=s(t(J)),W=t(re),z=s(J),$=s(t(z)),se=t($),R=s(z),ae=s(t(R)),oe=t(ae),B=s(R),p=s(t(B)),x=t(p),N=s(B),ie=s(t(N)),U=t(ie),Ee=s(N),Se=s(t(Ee)),Le=t(Se),pe=s(c,2);{var qe=b=>{var m=Ve(),C=s(F(m),2),ne=t(C),le=t(ne),de=s(C,2);ue(de,{get newickString(){return a().FILE_INFO.nj},height:600,width:800}),v(()=>n(le,a().FILE_INFO.nj)),l(b,m)};g(pe,b=>{var m;(m=a().FILE_INFO)!=null&&m.nj&&b(qe)})}var Me=s(pe,2);{var Re=b=>{var m=je(),C=s(F(m),2),ne=t(C),le=t(ne),de=s(C,2);ue(de,{get newickString(){return a().FILE_PARTITION_INFO[0].usertree},height:600,width:800}),v(()=>n(le,a().FILE_PARTITION_INFO[0].usertree)),l(b,m)};g(Me,b=>{var m;(m=a())!=null&&m.FILE_PARTITION_INFO&&b(Re)})}v(b=>{n(D,a().FILE_INFO.gencodeid),n(W,a().FILE_INFO.goodtree?"Yes":"No"),n(se,a().FILE_INFO.partitions),n(oe,a().FILE_INFO.rawsites),n(x,a().FILE_INFO.sites),n(U,a().FILE_INFO.sequences),n(Le,b)},[()=>new Date(parseInt(a().FILE_INFO.timestamp.trim())*1e3).toLocaleString()],Fe),l(q,H)};g(te,q=>{r(I)&&q(k)})}ce("click",L,()=>G(I,!r(I))),l(h,f)},T=h=>{var f=Qe();l(h,f)};g(w,h=>{var f;(f=a())!=null&&f.FILE_INFO?h(O):h(T,!1)},!0)}l(y,e)};g(X,y=>{var e;(e=a())!=null&&e.error?y(Z):y(ee,!1)})}l(K,_),Ie()}Ne.__docgen={version:3,name:"dataReaderResults.svelte",data:[{name:"fileMetricsJSON",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};const ft={title:"dataReaderResults",component:Ne},Ze={FILE_INFO:{gencodeid:0,goodtree:1,nj:"(((((HUMAN:0.0007094811175330963,CHIMP:0.001097999950788399):0.01636505170584718,(BABOON:0.002228135311756104,RHMONKEY:0.003208158699156509):0.02669224056226239):0.1104329651335271,(MOUSE:0.1083853380447001,RAT:0.08033684101813202):0.269861493006827):0.02554526101244153,CAT:0.2324473165131622):0.009523377372626096,(COW:0.2190208699215655,PIG:0.1954998868609751):0.07189141490205825,HORSE:0.1953515445825866)",partitions:1,rawsites:561,sequences:10,sites:187,timestamp:"          1738188391"},SEQUENCES:{0:{name:"HUMAN",seqindex:0},1:{name:"CHIMP",seqindex:1},2:{name:"BABOON",seqindex:2},3:{name:"RHMONKEY",seqindex:3},4:{name:"COW",seqindex:4},5:{name:"PIG",seqindex:5},6:{name:"HORSE",seqindex:6},7:{name:"CAT",seqindex:7},8:{name:"MOUSE",seqindex:8},9:{name:"RAT",seqindex:9}},FILE_PARTITION_INFO:{0:{endcodon:560,partition:1,span:561,startcodon:0,usertree:"((((PIG:0.147969,COW:0.213430):0.085099,HORSE:0.165787,CAT:0.264806):0.058611,((RHMONKEY{PR}:0.002015,BABOON{PR}:0.003108){PR}:0.022733,(HUMAN{PR}:0.004349,CHIMP{PR}:0.000799){PR}:0.011873){PR}:0.101856){PR}:0.340802,RAT:0.050958,MOUSE:0.097950)"}}},et={error:"This doesn't seem to be a nucleotide alignment. It had 20 character states, whereas we expected 4. Perhaps you uploaded an amino-acid alignment by mistake?"},Y={args:{fileMetricsJSON:Ze}},V={args:{fileMetricsJSON:et}};var ve,ge,_e;Y.parameters={...Y.parameters,docs:{...(ve=Y.parameters)==null?void 0:ve.docs,source:{originalSource:`{
  args: {
    fileMetricsJSON: validData
  }
}`,...(_e=(ge=Y.parameters)==null?void 0:ge.docs)==null?void 0:_e.source}}};var fe,be,ye;V.parameters={...V.parameters,docs:{...(fe=V.parameters)==null?void 0:fe.docs,source:{originalSource:`{
  args: {
    fileMetricsJSON: errorData
  }
}`,...(ye=(be=V.parameters)==null?void 0:be.docs)==null?void 0:ye.source}}};const bt=["Default","ErrorCase"];export{Y as Default,V as ErrorCase,bt as __namedExportsOrder,ft as default};
