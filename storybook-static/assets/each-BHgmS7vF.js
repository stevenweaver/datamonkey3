import{E as U,b as N,c as S,d as W,e as Y}from"./template-Bf37FghY.js";import{h as Z}from"./class-BhzPnwhT.js";import{m as $,b as j,n as O,I as k,o as X,c as J,d as ee,t as K,q as re,v as V,w as z,x as ae,y as ne,z as ie,A as fe,B as le,C as ue,D as te,F,j as ve,G as se}from"./runtime-D_5eIJdB.js";function me(i,e){return e}function de(i,e,a,u){for(var v=[],s=e.length,c=0;c<s;c++)ae(e[c].e,v,!0);var h=s>0&&v.length===0&&a!==null;if(h){var o=a.parentNode;ne(o),o.append(a),u.clear(),A(i,e[0].prev,e[s-1].next)}ie(v,()=>{for(var p=0;p<s;p++){var d=e[p];h||(u.delete(d.k),A(i,d.prev,d.next)),fe(d.e,!h)}})}function xe(i,e,a,u,v,s=null){var c=i,h={flags:e,items:new Map,first:null},o=(e&U)!==0;if(o){var p=i;c=p.appendChild($())}var d=null,E=!1,I=le(()=>{var r=a();return ve(r)?r:r==null?[]:K(r)});j(()=>{var r=O(I),f=r.length;if(!(E&&f===0)){E=f===0;{var t=ue;ce(r,h,c,v,e,(t.f&k)!==0,u,a)}s!==null&&(f===0?d?X(d):d=J(()=>s(c)):d!==null&&ee(d,()=>{d=null})),O(I)}})}function ce(i,e,a,u,v,s,c,h){var R,q,L,y;var o=(v&W)!==0,p=(v&(N|S))!==0,d=i.length,E=e.items,I=e.first,r=I,f,t=null,g,_=[],m=[],w,C,n,l;if(o)for(l=0;l<d;l+=1)w=i[l],C=c(w,l),n=E.get(C),n!==void 0&&((R=n.a)==null||R.measure(),(g??(g=new Set)).add(n));for(l=0;l<d;l+=1){if(w=i[l],C=c(w,l),n=E.get(C),n===void 0){var P=r?r.e.nodes_start:a;t=_e(P,e,t,t===null?e.first:t.next,w,C,l,u,v,h),E.set(C,t),_=[],m=[],r=t.next;continue}if(p&&oe(n,w,l,v),n.e.f&k&&(X(n.e),o&&((q=n.a)==null||q.unfix(),(g??(g=new Set)).delete(n))),n!==r){if(f!==void 0&&f.has(n)){if(_.length<m.length){var b=m[0],x;t=b.prev;var D=_[0],M=_[_.length-1];for(x=0;x<_.length;x+=1)G(_[x],b,a);for(x=0;x<m.length;x+=1)f.delete(m[x]);A(e,D.prev,M.next),A(e,t,D),A(e,M,b),r=b,t=M,l-=1,_=[],m=[]}else f.delete(n),G(n,r,a),A(e,n.prev,n.next),A(e,n,t===null?e.first:t.next),A(e,t,n),t=n;continue}for(_=[],m=[];r!==null&&r.k!==C;)(s||!(r.e.f&k))&&(f??(f=new Set)).add(r),m.push(r),r=r.next;if(r===null)continue;n=r}_.push(n),t=n,r=n.next}if(r!==null||f!==void 0){for(var T=f===void 0?[]:K(f);r!==null;)(s||!(r.e.f&k))&&T.push(r),r=r.next;var H=T.length;if(H>0){var Q=v&U&&d===0?a:null;if(o){for(l=0;l<H;l+=1)(L=T[l].a)==null||L.measure();for(l=0;l<H;l+=1)(y=T[l].a)==null||y.fix()}de(e,T,Q,E)}}o&&re(()=>{var B;if(g!==void 0)for(n of g)(B=n.a)==null||B.apply()}),V.first=e.first&&e.first.e,V.last=t&&t.e}function oe(i,e,a,u){u&N&&z(i.v,e),u&S?z(i.i,a):i.i=a}function _e(i,e,a,u,v,s,c,h,o,p){var d=(o&N)!==0,E=(o&Y)===0,I=d?E?te(v):F(v):v,r=o&S?F(c):c,f={i:r,v:I,k:s,a:null,e:null,prev:a,next:u};try{return f.e=J(()=>h(i,I,r,p),Z),f.e.prev=a&&a.e,f.e.next=u&&u.e,a===null?e.first=f:(a.next=f,a.e.next=f.e),u!==null&&(u.prev=f,u.e.prev=f.e),f}finally{}}function G(i,e,a){for(var u=i.next?i.next.e.nodes_start:a,v=e?e.e.nodes_start:a,s=i.e.nodes_start;s!==u;){var c=se(s);v.before(s),s=c}}function A(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}export{xe as e,me as i};
